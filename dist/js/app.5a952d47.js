(function(t){function e(e){for(var n,i,s=e[0],c=e[1],l=e[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0357":function(t,e,a){},"08c8":function(t,e,a){"use strict";a("6a51")},"134a":function(t,e,a){"use strict";a("c804")},2159:function(t,e,a){},"36ec":function(t,e,a){},"3d2a":function(t,e,a){"use strict";a("4409")},4409:function(t,e,a){},"55a2":function(t,e,a){"use strict";a("7947")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("b-navbar",{attrs:{toggleable:"sm",type:"dark",variant:"faded",id:"nav"}},[a("b-navbar-brand",{attrs:{to:"/"}},[a("img",{staticClass:"d-inline-block",staticStyle:{"max-width":"40px","margin-right":"10px"},attrs:{src:"https://icons.iconarchive.com/icons/icons8/windows-8/256/Transport-Steering-Wheel-icon.png",alt:"Wheel"}}),t._v(" Rent-a-Car ")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{to:"/"}},[t._v("Home")]),t.token?a("b-nav-item",{attrs:{to:"/reservations"}},[t._v("My reservations")]):t._e()],1),a("b-navbar-nav",{staticClass:"ml-auto"},[t.token?t._e():a("b-nav-item",{attrs:{to:"/register"}},[t._v("Register")]),t.token?t._e():a("b-nav-item",{attrs:{to:"/login"}},[t._v("Log in")]),t.token?a("b-avatar",{staticStyle:{"margin-top":"9px"},attrs:{variant:"light",size:"1.5rem"}}):t._e(),t.token?a("b-nav-item-dropdown",{attrs:{text:t.userEmail,right:""}},[t.token?a("b-dropdown-item",{staticStyle:{padding:"0"},attrs:{to:"/settings"}},[a("b-avatar",{staticClass:"mr-2",attrs:{size:"1.5rem",icon:"gear-fill",variant:"dark"}}),a("span",{staticClass:"mr-auto"},[t._v("Settings")])],1):t._e(),t.token?a("b-dropdown-item",{on:{click:function(e){return t.logout()}}},[a("b-avatar",{staticClass:"mr-2",attrs:{size:"1.5rem",icon:"arrow-bar-down",variant:"danger"}}),a("span",{staticClass:"mr-auto"},[t._v("Sign out")])],1):t._e()],1):t._e()],1)],1)],1),a("router-view")],1)},o=[],i=a("5530"),s=a("2f62"),c={name:"App",computed:Object(i["a"])({},Object(s["d"])(["token","userEmail"])),mounted:function(){localStorage.token&&this.setToken(localStorage.token)},methods:Object(i["a"])(Object(i["a"])({},Object(s["c"])(["removeToken","setToken"])),{},{logout:function(){this.removeToken(),this.$router.push({name:"Home"})}}),sockets:{error:function(t){alert(t)}}},l=c,u=(a("034f"),a("2877")),d=Object(u["a"])(l,r,o,!1,null,null,null),m=d.exports,f=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("CarList"),(t.token,a("div"))],1)},b=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cards"},t._l(t.cars,(function(e){return a("b-card-group",{key:e.id,attrs:{deck:""}},[a("b-card",{staticClass:"overflow-hidden",staticStyle:{"max-width":"540px",margin:"20px",border:"2px solid white"},attrs:{"no-body":"","bg-variant":"dark","text-variant":"light"}},[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{md:"6"}},[a("b-card-img",{staticClass:"rounded-0",staticStyle:{border:"1px solid white"},attrs:{src:e.image,alt:"Image"}}),a("router-link",{attrs:{to:{name:"Reviews",query:{id:e.id,image:e.image,name:e.manufacturer+" "+e.model+" "+e.year,rating:e.rating}}}},[a("b-form-rating",{staticStyle:{"background-color":"black",color:"white"},attrs:{variant:"warning",readonly:"","show-value":"",precision:"2"},model:{value:e.rating,callback:function(a){t.$set(e,"rating",a)},expression:"car.rating"}})],1)],1),a("b-col",{attrs:{md:"6"}},[a("b-card-body",{attrs:{title:e.manufacturer+" "+e.model+" "+e.year}},[a("em",{staticClass:"price"},[t._v("â‚¬"+t._s(e.pricePerDay)+"!")]),a("b-button",{attrs:{variant:"success"},on:{click:function(a){return t.book(e.id)}}},[t._v("Book now!")])],1)],1)],1)],1)],1)})),1)},h=[],g={name:"CarList",computed:Object(i["a"])({},Object(s["d"])(["cars","token"])),mounted:function(){this.getAllCars()},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["getAllCars"])),{},{book:function(t){this.token?this.$router.push({name:"Single",params:{id:t}}):this.$bvToast.toast("Please log in first",{title:"Unable to book",noAutoHide:!0,variant:"warning",toaster:"b-toaster-top-center",solid:!0})}})},k=g,w=(a("55a2"),Object(u["a"])(k,v,h,!1,null,"754567da",null)),y=w.exports,_={components:{CarList:y},name:"Home",computed:Object(i["a"])({},Object(s["d"])(["token"]))},j=_,x=Object(u["a"])(j,p,b,!1,null,null,null),O=x.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("h3",[t._v("Log into an existing account")]),a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{label:"Email:","label-for":"email"}},[a("b-form-input",{attrs:{id:"email",placeholder:"Enter email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[a("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Enter password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Log in")])],1)],1)},S=[],D={name:"Login",data:function(){return{form:{email:"",password:""}}},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["login"])),{},{onSubmit:function(t){t.preventDefault(),this.login(this.form),this.$router.push({name:"Home"})}})},E=D,I=(a("eccc"),Object(u["a"])(E,C,S,!1,null,"77fea9b3",null)),$=I.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("h3",[t._v("Register a new account")]),a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{label:"Email address:","label-for":"email"}},[a("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Enter email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[a("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Enter password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Register")])],1)],1)},T=[],B={name:"Register",data:function(){return{form:{email:"",password:"",role:"Client"}}},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["register"])),{},{onSubmit:function(t){t.preventDefault(),this.register(this.form),this.$router.push({name:"Home"})}})},P=B,L=(a("08c8"),Object(u["a"])(P,R,T,!1,null,"5fe5f229",null)),V=L.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("b-card",{staticStyle:{margin:"20px",border:"1px solid white"},attrs:{title:"Make a reservation","bg-variant":"dark","text-variant":"light"}},[a("b-card-img",{staticStyle:{"max-width":"460px","margin-bottom":"20px"},attrs:{src:t.car.image}}),a("b-card-text",[a("ul",[a("li",[t._v("Manufacturer: "+t._s(t.car.manufacturer))]),a("li",[t._v("Model: "+t._s(t.car.model))]),a("li",[t._v("Year: "+t._s(t.car.year))]),a("li",[t._v("Doors: "+t._s(t.details.doors))]),a("li",[t._v("Fuel: "+t._s(t.details.fuel))]),a("li",[t._v("Transmission: "+t._s(t.details.transmission))])]),a("b-button",{attrs:{variant:"success"},on:{click:function(e){t.next=!t.next}}},[t._v("Next")])],1),t.next?a("reservation-form",{attrs:{carId:t.car.id}}):t._e()],1)],1)},A=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form"},[a("label",{attrs:{for:"startDate"}},[t._v("Pick-up date:")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"startDate",min:new Date},model:{value:t.startDateValue,callback:function(e){t.startDateValue=e},expression:"startDateValue"}}),a("label",{attrs:{for:"endDate"}},[t._v("Return date:")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"endDate",min:t.startDateValue},model:{value:t.endDateValue,callback:function(e){t.endDateValue=e},expression:"endDateValue"}}),a("b-button",{attrs:{disabled:t.bookButtonDisabled,variant:"success"},on:{click:function(e){return t.bookReservation()}}},[t._v("Book")])],1)},q=[],z=(a("a9e3"),{name:"ReservationForm",data:function(){return{startDateValue:null,endDateValue:null,bookButtonDisabled:!0}},computed:Object(i["a"])({},Object(s["d"])(["userId"])),props:{carId:Number},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["postReservation"])),{},{bookReservation:function(){var t={startDate:this.startDateValue,endDate:this.endDateValue,carId:this.carId,userId:this.userId};this.postReservation(t),this.$router.push({name:"Reservations"})}}),watch:{startDateValue:function(t){null!==this.endDateValue&&null!==t&&(this.bookButtonDisabled=!1)},endDateValue:function(t){null!==this.startDateValue&&null!==t&&(this.bookButtonDisabled=!1)}}}),F=z,H=(a("a95d"),Object(u["a"])(F,M,q,!1,null,"5e3ceb0a",null)),J=H.exports,N={name:"Single",components:{ReservationForm:J},data:function(){return{car:{},details:{},next:!1}},mounted:function(){var t=this;this.getCarById(this.$route.params.id).then((function(e){return t.car=e})),this.getCarDetails(this.$route.params.id).then((function(e){return t.details=e}))},methods:Object(i["a"])({},Object(s["b"])(["getCarById","getCarDetails"]))},Y=N,W=(a("579a"),Object(u["a"])(Y,U,A,!1,null,"fc48a4b4",null)),G=W.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("b-table",{staticStyle:{color:"white","background-color":"#e2942d",margin:"0"},attrs:{items:t.reservations,fields:t.fields},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-button",{attrs:{variant:"danger"},on:{click:function(a){t.$bvModal.show("my-modal"),t.bindCancelButton(e.item.id)}}},[t._v("Cancel reservation")])]}}])}),a("b-modal",{attrs:{id:"my-modal","hide-footer":"","hide-header":""}},[a("div",{staticClass:"d-block text-center"},[a("h4",{staticStyle:{margin:"20px 0"}},[t._v("Are you sure?")])]),a("b-button",{staticClass:"modalButton",on:{click:function(e){return t.$bvModal.hide("my-modal")}}},[t._v("Go back")]),a("b-button",{ref:"cancelButton",staticClass:"modalButton",attrs:{variant:"outline-danger"}},[t._v("Cancel reservation")])],1)],1)},Q=[],X={name:"Reservations",data:function(){return{fields:["carId","startDate","endDate",{key:"actions",label:"Cancel"}]}},computed:Object(i["a"])({},Object(s["d"])(["reservations"])),methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["getReservationsForUser","cancelReservation"])),{},{cancel:function(t){this.cancelReservation(t),this.$bvModal.hide("my-modal")},bindCancelButton:function(t){var e=this;this.$nextTick((function(){e.$refs.cancelButton.addEventListener("click",e.cancel.bind(null,t))}))}}),mounted:function(){this.getReservationsForUser()}},Z=X,tt=(a("134a"),Object(u["a"])(Z,K,Q,!1,null,"4094b928",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings"},[a("b-form",{attrs:{state:t.validation,novalidate:"",validated:""},on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-email",label:"Email address:","label-for":"input-email",description:"We'll never share your email with anyone else."}},[a("b-form-input",{attrs:{id:"input-email",type:"email",placeholder:"Enter email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("b-form-group",{attrs:{id:"input-group-password",label:"Your password:","label-for":"input-password"}},[a("b-form-input",{attrs:{id:"input-password",type:"password",placeholder:"Enter password",minlength:"3",maxlength:"15",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)},nt=[],rt={name:"Settings",data:function(){return{form:{email:"",password:""},validation:null}},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["updateUserInfo"])),{},{onSubmit:function(t){t.preventDefault(),!1===this.validation&&alert("yo")}})},ot=rt,it=(a("d232"),Object(u["a"])(ot,at,nt,!1,null,"3cf9e2da",null)),st=it.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("b-card-img",{staticClass:"rounded-0",staticStyle:{border:"1px solid white","margin-bottom":"10px","max-width":"450px"},attrs:{src:t.car.image,alt:"Image"}}),a("h2",{staticStyle:{margin:"20px 0"}},[t._v(t._s(t.car.name))]),a("div",{staticClass:"reviewForm"},[a("h4",[t._v("Leave a review")]),a("b-form-rating",{attrs:{variant:"warning","show-value":"",precision:"2"},model:{value:t.car.rating,callback:function(e){t.$set(t.car,"rating",e)},expression:"car.rating"}}),a("b-form-textarea",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"Your message",rows:"5","max-rows":"8"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),a("b-button",{staticStyle:{"margin-top":"10px"},attrs:{variant:"outline-success"},on:{click:t.onSubmit}},[t._v("Submit")])],1)],1)},lt=[],ut={name:"Reviews",data:function(){return{car:null,comment:null}},computed:Object(i["a"])({},Object(s["d"])(["token"])),mounted:function(){this.car=this.$route.query},methods:{onSubmit:function(){alert("submitted"),this.$socket.emit("review",{body:"Yo whats up",token:this.token})}}},dt=ut,mt=(a("3d2a"),Object(u["a"])(dt,ct,lt,!1,null,"81ea8d82",null)),ft=mt.exports;n["default"].use(f["a"]);var pt=[{path:"/",name:"Home",component:O},{path:"/register",name:"Register",component:V},{path:"/login",name:"Login",component:$},{path:"/book/:id",name:"Single",component:G},{path:"/reservations",name:"Reservations",component:et},{path:"/settings",name:"Settings",component:st},{path:"/reviews",name:"Reviews",component:ft}],bt=new f["a"]({mode:"history",base:"/",routes:pt}),vt=bt,ht=a("5f5b"),gt=a("b1e0"),kt=a("5132"),wt=a.n(kt);a("f9e3"),a("2dd8"),a("4de4"),a("d3b7"),a("e9c4"),a("d9e2");n["default"].use(s["a"]);var yt=new s["a"].Store({state:{token:"",cars:[],reservations:[],userId:null,userEmail:null},mutations:{setToken:function(t,e){t.token=e,localStorage.token=e},removeToken:function(t){t.token="",localStorage.token=""},setUserId:function(t,e){t.userId=e},setUserEmail:function(t,e){t.userEmail=e},setCarList:function(t,e){t.cars=e},addCar:function(t,e){t.cars.push(e)},setReservationList:function(t,e){t.reservations=e},addReservation:function(t,e){t.reservations.push(e)},removeReservation:function(t,e){t.reservations=t.reservations.filter((function(t){return t.id!==e}))}},actions:{register:function(t,e){var a=t.commit;fetch("http://127.0.0.1:65533/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(_t).then((function(t){return t.json()})).then((function(t){a("setToken",t.token),a("setUserId",t.userId),a("setUserEmail",t.userEmail)}))},login:function(t,e){var a=t.commit;fetch("http://127.0.0.1:65533/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(_t).then((function(t){return t.json()})).then((function(t){a("setToken",t.token),a("setUserId",t.userId),a("setUserEmail",t.userEmail)}))},getAllCars:function(t){var e=t.commit;fetch("http://127.0.0.1:65535/api/cars").then(_t).then((function(t){return t.json()})).then((function(t){return e("setCarList",t.data)}))},getCarById:function(t,e){var a=t.commit,n=t.state;return new Promise((function(t,r){var o=n.cars.filter((function(t){return t.id==e}))[0];o?t(o):fetch("http://127.0.0.1:65535/api/cars/".concat(e)).then(_t).then((function(t){return t.json()})).then((function(e){a("addCar",e),t(e)})).catch((function(t){return r(t)}))}))},getCarDetails:function(t,e){var a=t.state;return new Promise((function(t,n){var r=a.cars.filter((function(t){return t.id==e}))[0];fetch("http://127.0.0.1:65535/api/cardetails/".concat(r.detailsId),{headers:{Authorization:"Bearer "+a.token}}).then(_t).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return n(t)}))}))},getReservationsForUser:function(t){var e=t.commit,a=t.state;fetch("http://127.0.0.1:65535/api/reservations",{headers:{Authorization:"Bearer "+a.token}}).then(_t).then((function(t){return t.json()})).then((function(t){var n=t.data.filter((function(t){return t.userId==a.userId}));e("setReservationList",n)}))},postReservation:function(t,e){var a=t.commit,n=t.state;fetch("http://127.0.0.1:65535/api/reservations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.token},body:JSON.stringify({startDate:e.startDate,endDate:e.endDate,carId:e.carId,userId:e.userId})}).then(_t).then((function(t){return t.json()})).then((function(t){return a("addReservation",t.reservation)}))},cancelReservation:function(t,e){var a=t.commit,n=t.state;fetch("http://127.0.0.1:65535/api/reservations/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.token},body:JSON.stringify({userId:n.userId})}).then(_t).then((function(){return a("removeReservation",e)}))},updateUserInfo:function(t,e){var a=t.commit,n=t.state;fetch("http://127.0.0.1:65535/api/users/".concat(n.userId),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.token},body:JSON.stringify({email:e.email,password:e.password,userId:n.userId,role:"Client"})}).then(_t).then((function(t){return t.json()})).then((function(t){return a("setUserEmail",t.email)}))}}});function _t(t){if(!t.ok)throw Error(t.statusText);return t}n["default"].use(ht["a"]),n["default"].use(gt["a"]),n["default"].use(new wt.a({debug:!1,connection:"ws://localhost:65535/",vuex:{store:yt,actionPrefix:"socket_"}})),n["default"].config.productionTip=!1,new n["default"]({router:vt,store:yt,render:function(t){return t(m)}}).$mount("#app")},"579a":function(t,e,a){"use strict";a("2159")},"6a51":function(t,e,a){},7947:function(t,e,a){},"85ec":function(t,e,a){},a95d:function(t,e,a){"use strict";a("0357")},c804:function(t,e,a){},d232:function(t,e,a){"use strict";a("36ec")},eccc:function(t,e,a){"use strict";a("fa9c")},fa9c:function(t,e,a){}});
//# sourceMappingURL=app.5a952d47.js.map